{
  "task": "ui_ux_overhaul_full_app",
  "role": "fullstack_engineer",
  "objective": "Implement a clean SaaS-style end-to-end UI/UX for tutor and admin workflows using FullCalendar for scheduling, shadcn/ui for components, and Tailwind for styling. UI must integrate with existing API endpoints already built (auth, hours aggregation, extra hours, time off).",
  "constraints": {
    "no_backend_logic_changes": true,
    "no_endpoint_contract_changes": true,
    "light_theme_default": true,
    "dark_theme_optional_later": true,
    "replit_friendly": true,
    "branding_from_repo": true
  },
  "stack": {
    "styling": ["tailwindcss"],
    "components": ["shadcn/ui"],
    "icons": ["lucide-react"],
    "calendar": ["@fullcalendar/react", "@fullcalendar/daygrid", "@fullcalendar/interaction"],
    "data_fetching": [
      "use existing fetch utilities if present; otherwise implement a thin typed api client",
      "optional: tanstack/react-query if already used; do NOT introduce if repo is not set up for it"
    ]
  },
  "routing_and_access_control": {
    "requirements": [
      "Tutor-only routes blocked from admins; admin-only routes blocked from tutors.",
      "If not authenticated, redirect to /login.",
      "Support multi-account selection route if already implemented."
    ],
    "routes": {
      "public": ["/login", "/select-account", "/timeout"],
      "tutor": ["/tutor/dashboard", "/tutor/calendar", "/tutor/extra-hours", "/tutor/time-off"],
      "admin": ["/admin/dashboard", "/admin/approvals", "/admin/pay-period-summary"]
    }
  },
  "layout": {
    "app_shell": {
      "sidebar": {
        "items_tutor": [
          { "label": "Dashboard", "path": "/tutor/dashboard", "icon": "LayoutDashboard" },
          { "label": "Calendar", "path": "/tutor/calendar", "icon": "Calendar" },
          { "label": "Extra Hours", "path": "/tutor/extra-hours", "icon": "Clock" },
          { "label": "Time Off", "path": "/tutor/time-off", "icon": "Umbrella" }
        ],
        "items_admin": [
          { "label": "Dashboard", "path": "/admin/dashboard", "icon": "LayoutDashboard" },
          { "label": "Approvals", "path": "/admin/approvals", "icon": "Inbox" },
          { "label": "Pay Period Summary", "path": "/admin/pay-period-summary", "icon": "Table2" }
        ],
        "behavior": [
          "Collapsible sidebar",
          "Active route highlighting",
          "Brand/logo at top using legacy branding assets from repo"
        ]
      },
      "topbar": {
        "requirements": [
          "Show role badge (Tutor/Admin)",
          "Show user display name if available",
          "Logout button",
          "Optional theme toggle placeholder (wire minimal state; dark theme can be added later)"
        ]
      }
    }
  },
  "pages": [
    {
      "name": "Tutor Dashboard",
      "path": "/tutor/dashboard",
      "api_calls": [
        "GET /api/hours/me/weekly",
        "GET /api/hours/me/pay-period",
        "GET /api/hours/me/monthly"
      ],
      "ui_requirements": [
        "Metric cards: This Week Hours, Pay Period Hours, Month Hours.",
        "Pending cards: pending extra hours count, pending time off count (use /me list endpoints if available; otherwise show links only).",
        "Quick action buttons to New Extra Hours and New Time Off.",
        "Graceful loading skeletons and empty states."
      ]
    },
    {
      "name": "Tutor Calendar",
      "path": "/tutor/calendar",
      "api_calls": [
        "GET /api/calendar/me/month (tutoring schedule)",
        "GET /api/timeoff/me (filter by month client-side if no month endpoint exists yet)"
      ],
      "ui_requirements": [
        "Use FullCalendar month view (dayGridMonth).",
        "Render tutoring schedule blocks (from MSSQL) as events.",
        "Render time off requests as overlay events with status styling (pending/approved/denied/cancelled).",
        "Toggles: Show Schedule, Show Time Off.",
        "Click event opens a side panel or modal with details."
      ]
    },
    {
      "name": "Tutor Extra Hours",
      "path": "/tutor/extra-hours",
      "api_calls": [
        "GET /api/extrahours/me",
        "POST /api/extrahours"
      ],
      "ui_requirements": [
        "Tabs: My Requests / New Request.",
        "New Request form: startAt, endAt, description; live duration.",
        "On submit: success toast; show email draft modal if API returns emailDraft.",
        "My Requests list: status chips, sortable by date; cancel pending if endpoint exists."
      ]
    },
    {
      "name": "Tutor Time Off",
      "path": "/tutor/time-off",
      "api_calls": [
        "GET /api/timeoff/me",
        "POST /api/timeoff",
        "POST /api/timeoff/{id}/cancel"
      ],
      "ui_requirements": [
        "Tabs: My Requests / New Request.",
        "New Request form: startAt, endAt, type dropdown, notes; live duration.",
        "My Requests list with status chips and cancel pending.",
        "Clear success/error states."
      ]
    },
    {
      "name": "Admin Dashboard",
      "path": "/admin/dashboard",
      "api_calls": [
        "GET /api/extrahours/admin/pending?franchiseId=X",
        "GET /api/timeoff/admin/pending?franchiseId=X",
        "GET /api/pay-period/current (if exists)",
        "GET /api/pay-period (if selector exists)"
      ],
      "ui_requirements": [
        "Metric cards: Pending Extra Hours, Pending Time Off, Current Pay Period dates.",
        "Primary actions: Go to Approvals, Go to Pay Period Summary.",
        "Franchise selector if admin context supports it; otherwise show current franchise."
      ]
    },
    {
      "name": "Approvals Inbox",
      "path": "/admin/approvals",
      "api_calls": [
        "GET /api/extrahours/admin/pending?franchiseId=X",
        "POST /api/extrahours/{id}/decide",
        "GET /api/timeoff/admin/pending?franchiseId=X",
        "POST /api/timeoff/{id}/decide"
      ],
      "ui_requirements": [
        "Single page with tabs: Extra Hours | Time Off.",
        "Each tab shows a list/table with: tutor name/email, date range, duration, description/notes.",
        "Approve/Deny actions per row.",
        "Deny requires reason via modal dialog.",
        "Optimistic UI: remove from list on success; rollback on error.",
        "On time off approve, show loader 'Posting to calendarâ€¦' while API completes."
      ]
    },
    {
      "name": "Pay Period Summary",
      "path": "/admin/pay-period-summary",
      "api_calls": [
        "GET /api/pay-period/current (or /api/pay-period)",
        "GET /api/hours/summary?franchiseId=X&start=...&end=..."
      ],
      "ui_requirements": [
        "Pay period picker: Current, Previous, Custom start/end (if API supports).",
        "Table: Tutor, Tutoring Hours, Extra Hours, Total.",
        "Filter: only show rows where totalHours > 0 (default ON).",
        "Buttons: Copy table to clipboard; Export CSV."
      ]
    }
  ],
  "component_guidelines": {
    "requirements": [
      "Use shadcn/ui: Card, Button, Table, Tabs, Dialog, Badge, Input, Select, Textarea, Toast.",
      "Consistent spacing (p-6 pages, gap-4 grids).",
      "Status chips: pending/approved/denied/cancelled with consistent styling.",
      "Loading skeletons for lists and metric cards.",
      "All forms must show inline validation errors."
    ]
  },
  "branding": {
    "requirements": [
      "Locate legacy form branding assets already in repo and reuse: logo, colors, any header styling.",
      "Define a small set of CSS variables or Tailwind theme tokens derived from branding.",
      "Do not invent random colors; keep it clean and consistent."
    ]
  },
  "acceptance_criteria": [
    "Tutor can login, view dashboard metrics, view calendar with tutoring + time off overlays, submit extra hours, submit time off, and view request lists.",
    "Admin can view approvals inbox, approve/deny requests, and generate pay period summary with totalHours > 0 filter.",
    "App looks cohesive, modern, and consistent with branding assets.",
    "No breaking changes to backend endpoints."
  ]
}
